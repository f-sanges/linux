===============================================NGINX===============================================

Installare in Ubuntu: sudo apt-get install nginx
file di configurazione: /etc/nginx/nginx.conf

in /etc/nginx/sites-enabled:
drwxr-xr-x 8 fuokista fuokista 4096 Mar 17 18:40 ../
lrwxrwxrwx 1 fuokista fuokista   34 Mar 17 18:06 default -> /etc/nginx/sites-available/default

Disable the default virtual host, that is pre-configured when Nginx is istalled via Ubuntuâ€™s packet manager apt:
unlink /etc/nginx/sites-enabled/default -> rimuove il link

Enter the directory /etc/nginx/sites-available and create a reverse proxy configuration file.
cd /etc/nginx/sites-available
nano reverse-proxy.conf
Paste the following Nginx configuration in the text editor. The proxy server redirects all incomming connections on port 80 to the Webfsd server, listening on port 8000. Edit the port value depending on the applications specific port.

server {
        listen 80;
        listen [::]:80;

        access_log /var/log/nginx/reverse-access.log;
        error_log /var/log/nginx/reverse-error.log;

        location / {
                    proxy_pass http://127.0.0.1:8080;     //IP DI JENKINS
  }
}
Note: Accesses and errors are located in a log files at /var/log/nginx.

Copy the configuration from /etc/nginx/sites-available to /etc/nginx/sites-enabled. It is recommended to use a symbolic link.

ln -s /etc/nginx/sites-available/reverse-proxy.conf /etc/nginx/sites-enabled/reverse-proxy.conf

Test the Nginx configuration file

sudo nginx -t
which returns
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful

Open a web browser on your local computer and paste your public_ip which will display your web applications homepage.








systemctl enable nginx -> per start all'avvio
systemctl status nginx -> stato
systemctl start nginx  -> start nginx

elinks: text browser


NOTA: se installi Jenkins (8080) con nginx (80) se accedi a Jenkins e click su Gestisci Jenkins esce un msg di incorretta configurazione, click maggiori dettagli.
Ho aggiornato il file reverse-proxy.conf nel seguente modo:

fuokista@ubuntu:/usr/share/jenkins$ cat /etc/nginx/sites-enabled/reverse-proxy.conf
upstream jenkins {
  keepalive 32; # keepalive connections
  server 192.168.252.128:8080; # jenkins ip and port
}

server {
  listen          80;       # Listen on port 80 for IPv4 requests

  server_name     ubuntu;

  #this is the jenkins web root directory (mentioned in the /etc/default/jenkins file)   <-- IMPORTANTE
  root            /usr/share/jenkins/;							 <-- IMPORTANTE

  access_log      /var/log/nginx/access.log;	<-- IMPORTANTE
  error_log       /var/log/nginx/error.log;     <-- IMPORTANTE
  ignore_invalid_headers off; #pass through headers from Jenkins which are considered invalid by Nginx server.

  location ~ "^/static/[0-9a-fA-F]{8}\/(.*)$" {
    #rewrite all static files into requests to the root
    #E.g /static/12345678/css/something.css will become /css/something.css
    rewrite "^/static/[0-9a-fA-F]{8}\/(.*)" /$1 last;
  }

  location /userContent {
    #have nginx handle all the static requests to the userContent folder files
    #note : This is the $JENKINS_HOME dir
        root /var/lib/jenkins/;
    if (!-f $request_filename){
      #this file does not exist, might be a directory or a /**view** url
      rewrite (.*) /$1 last;
          break;
    }
        sendfile on;
  }

  location / {
      sendfile off;
      proxy_pass         http://192.168.252.128:8080;     <-- IMPORTANTE
      proxy_redirect     default;
      proxy_http_version 1.1;

      proxy_set_header   Host              $host;
      proxy_set_header   X-Real-IP         $remote_addr;
      proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;
      proxy_set_header   X-Forwarded-Proto $scheme;
      proxy_max_temp_file_size 0;

      #this is the maximum upload size
      client_max_body_size       10m;
      client_body_buffer_size    128k;

      proxy_connect_timeout      90;
      proxy_send_timeout         90;
      proxy_read_timeout         90;
      proxy_buffering            off;
      proxy_request_buffering    off; # Required for HTTP CLI commands in Jenkins > 2.54
      proxy_set_header Connection ""; # Clear for keepalive
  }

}